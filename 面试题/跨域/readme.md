# 同源策略
https://www.baidu.com/home

https://192.168.3.1:3000/home
 协议      域名       端口  路径

协议-域名-端口 都相同的两个源, 才叫同源, 才可以相互访问

- 在开发的过程中规避同源策略

- 同源策略破坏的是响应数据, 但是不破坏请求数据, 所以可以通过一些方法, 来规避同源策略

# 解决跨域问题
## 1. jsonp
 - 原理: 利用script标签的src属性不受同源策略限制的特性，通过动态创建script标签向跨域服务器发送请求。前端将回调函数名作为参数传递给后端，后端将数据包装成该回调函数的调用形式返回。前端提前在全局作用域定义同名函数来接收数据，实现跨域数据传输。需要注意请求完成后的资源清理和安全防护。
 - 缺陷: 
  1. 只支持 GET 请求
  2. 必须要后端支持

## 2. CORS
 - 原理: 后端在响应头中配置允许的源、方法、头信息, 来告知浏览器不需要同源策略的保护

## 3. nginx 反向代理 (等同于 node 代理)
 - 利用 nginx 的反向代理能力, 将请求转发到后端服务器, 后端服务器收到请求后, 将响应返回给 nginx, nginx 再将响应返回给前端浏览器

## 4. WebSocket
 - 利用WebSocket协议, 实现浏览器与服务器的全双工通信, 不受同源策略的限制, 可以在浏览器和服务器之间建立持久的连接, 实现实时通信

## 5. postMessage
    - 当一个页面通过 iframe 标签内嵌了一个二级页面, 一级页面和二级页面要进行通信时, 默认是跨域的, 需要利用 postMessage 实现跨域通信

## 6. domain
    - 当两个页面的域名不同, 但是二级域名相同, 这时候可以通过设置 document.domain 来实现跨域通信

    https://www.a.test.com
    https://www.b.test.com
