### 题目
实现一个函数 `getData(url, retry)`，需满足以下要求：
- **并发复用**：相同 URL 的请求在进行中时（包括重试的时候），复用当前请求，不发起新的请求。
- **成功缓存复用**：请求成功后，将结果缓存 5 秒，在缓存有效期内再次调用同一 URL，直接返回请求结果，不重新发起请求。
- **缓存过期**：缓存到期后再次调用重新发起请求。
- **失败重试**：如果请求失败，自动重试 `retry` 次（比如 `retry` 为 1，加上第一次请求，最多请求 2 次），最终依旧失败的直接返回失败结果。
- **动态重试更新**：如果多个调用并发执行，并且传入的 `retry` 次数不同，应取并发调用中的最大值作为该请求的重试上限。

可以使用如下提供的 `fetch(url)` 发送请求。

### 示例代码
```javascript
// 模拟 fetch
function fetch(url) {
  return new Promise((resolve, reject) => {
    const delay = Math.floor(Math.random() * 500); // 随机延迟 0~500ms
    setTimeout(() => {
      if (Math.random() < 0.5) {
        resolve({ url, data: "测试数据", delay, timestamp: Date.now() });
      } else {
        reject(new Error(`请求失败，耗时 ${delay}ms, timestamp: ${Date.now()}`));
      }
    }, delay);
  });
}

// 测试示例
const a = getData("/api/user", 1).then(console.log).catch(console.error); // 发起请求，如果失败重试 1 次
const b = getData("/api/user").then(console.log).catch(console.error); // 请求未完成，复用 a；参数 retry 未传默认为 0，保持当前最大的 1 次
const c = getData("/api/user", 3).then(console.log).catch(console.error); // 请求未完成，复用 a，重试次数更新为最大值 3 次

setTimeout(() => {
  /**
   * 如果上次请求成功，缓存 5s 未过期，复用 a；
   * 如果上次请求已结束并失败，发起新的请求；
   * 如果上次请求未结束，重试次数更新为最大值 6 次
   */
  const d = getData("/api/user", 6).then(console.log).catch(console.error);
}, 1000);

setTimeout(() => {
  const e = getData("/api/user", 2).then(console.log).catch(console.error); // 缓存已过期，重新发起请求
}, 8000);
```