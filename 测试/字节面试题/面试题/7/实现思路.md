# Autocomplete 组件实现思路（简约版）

## 核心挑战
- 数据量大：十几万条，匹配项可能好几十万条
- 频繁请求：用户输入会触发后端请求
- 性能问题：渲染大量 DOM 会导致卡顿

## 解决方案（简化版）

### 1. 防抖（Debounce）
- 延迟 300ms 后再发送请求
- 减少请求频率，避免每输入一个字符就请求

### 2. 虚拟滚动（Virtual Scrolling）
- **核心思路**：只渲染可见区域的列表项
- **实现方式**：
  - 用占位元素撑起总高度（保持滚动条正确）
  - 计算可见区域的起始和结束索引
  - 只渲染可见项 + 少量缓冲区
  - 用 `transform: translateY` 定位可见项
- **效果**：即使几十万条数据，也只渲染 10-20 个 DOM 节点

## 关键代码

```javascript
// 防抖：延迟执行请求
timerRef.current = setTimeout(async () => {
  const data = await fetchData(value);
  setResults(data);
}, 300);

// 虚拟滚动：计算可见区域
const startIndex = Math.floor(scrollTop / ITEM_HEIGHT);
const visibleData = results.slice(startIndex, startIndex + VISIBLE_COUNT);
```

## 性能优化

1. **防抖**：减少请求次数
2. **虚拟滚动**：减少 DOM 节点数量
3. **只渲染可见项**：性能提升显著

详见 `1.js` 文件中的实现

