# 进程线程
1. 进程：操作系统分配资源的基本单位，是程序运行时的实例
 (比如: 手机打开微信, 系统在执行打开指令, 到加载微信的上下文环境, 直到彻底关闭微信之前的这段时间, 都是在一个进程)

2. 线程：CPU调度执行的基本单位，是进程内部的执行流
 (比如: 微信应用中：渲染线程负责界面显示，网络线程获取最新数据，还有聊天、视频、游戏等不同功能对应的线程)

浏览器新开一个 tab 页面, 就是一个新的进程, 这个进程中有很多线程相互配合工作最后展示页面给用户。这个过程涉及到的线程有:
1. http 线程
2. js 引擎线程
3. 渲染线程

线程之间通常可以同时工作，但只有 JS 引擎线程和渲染线程是互斥的，其他线程之间则可以并行工作。

# 异步
- v8 在执行 JS 代码时, 默认只开启一个线程工作(JS 是单线程的), 所以考虑到执行效率, v8 会先执行同步代码, 遇到异步代码时, 会将异步代码存放到任务队列, 等待 JS 引擎线程空闲时, 再从任务队列中取出异步代码执行。

# Event-Loop
- JS 代码中有同步和异步之分, 异步还被分为宏任务和微任务

微任务: promise.then, process.nextTick, MutationObserver

宏任务: setTimeout, setInterval, ajax, setImmediate, I/O, UI rendering

- 执行顺序
1. 先执行同步代码(这属于宏任务), 这个过程中遇到异步, 就存入任务队列
2. 同步代码执行完毕后, 先执行微任务队列中的代码
3. 微任务全部执行完毕后, 有需要的情况下渲染页面,
4. 渲染完毕后, 执行宏任务队列中的代码 (开启了下一次的事件循环)

# await
1. 会将后续的代码挤入微任务队列
2. 浏览器将 await 的执行时间提前了 (await 后面的代码当成同步来看待)